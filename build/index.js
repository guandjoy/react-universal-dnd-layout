module.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e){t.exports=require("react")},function(t,e,n){t.exports=n(2)()},function(t,e,n){"use strict";var r=n(3);function o(){}function i(){}i.resetWarningCache=o,t.exports=function(){function t(t,e,n,o,i,c){if(c!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=n(1),c=n.n(i);var u,a,s,l=function(t){var e=t.ghostTransitionDuration,n=t.ghostTransitionTimingFunction;return o.a.createElement("div",{style:{position:"fixed",visibility:"visible",left:t.x,top:t.y,pointerEvents:"none",transition:t.drag?"none":"left ".concat(e,"ms ").concat(n,", top ").concat(e,"ms ").concat(n)},onTransitionEnd:function(){return t.onGhostEndTransition()}},t.children)},f=function(t){return function(e){e.preventDefault(),e.stopPropagation(),t({x:e.clientX,y:e.clientY})}};function d(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,u=t[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(t){return function(){return o.a.Children.map(t,(function(t,e){return t.props.separator?{index:e,id:t.key,order:t.props.order,separator:t.props.separator,element:t}:{index:e,id:t.key,order:t.props.order,separator:t.props.separator,width:t.props.width,height:t.props.height,element:o.a.cloneElement(t,y({},t.props,{draggableItem:{onMouseDown:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return onMouseDown(t,e)})),onMouseEnter:function(t){return onMouseEnterItem(t,e)},onDragEnd:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return onDragEnd(t,e)})),onTouchStart:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return onTouchStart(t,e)})),onTouchMove:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return onTouchMove(t,e)})),onTouchEnd:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return onTouchEnd()})),onClick:function(t){return onClickEvent()}}}))}}))}},g=function(t,e){if(console.log("item reducer",e,t),"update"===e.type)return b(e.payload)()};function v(t){var e=t.transitionTimingFunction,n=t.transitionDuration,i=t.ghostTransitionDuration,c=t.ghostTransitionTimingFunction,m=p(Object(r.useReducer)(g,[],b(t.children)),2),h=m[0],v=m[1];Object(r.useEffect)((function(){v({type:"update",payload:t.children}),console.log("itemss",h)}),[t.children]);var O=function(){return o.a.Children.map(t.children,(function(t,e){return t.props.separator?{index:e,id:t.key,order:t.props.order,separator:t.props.separator,element:t}:{index:e,id:t.key,order:t.props.order,separator:t.props.separator,width:t.props.width,height:t.props.height,element:o.a.cloneElement(t,y({},t.props,{draggableItem:{onMouseDown:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return Ft(t,e)})),onMouseEnter:function(t){return At(t,e)},onDragEnd:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return Yt(t,e)})),onTouchStart:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return _t(t,e)})),onTouchMove:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return kt(t,e)})),onTouchEnd:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return Bt()})),onClick:function(t){return Ee()}}}))}}))},E=p(Object(r.useState)((function(){return O()})),2),j=E[0],S=E[1];Object(r.useEffect)((function(){S((function(){return O()}))}),[t.children]);var x=p(Object(r.useState)(void 0),2),w=x[0],T=x[1],C=p(Object(r.useState)(void 0),2),M=C[0],P=C[1],D=p(Object(r.useState)(void 0),2),L=D[0],I=D[1],R=p(Object(r.useState)(!1),2),_=R[0],k=R[1],B=p(Object(r.useState)(!1),2),W=B[0],F=B[1],A=p(Object(r.useState)(),2),Y=A[0],H=A[1],N=p(Object(r.useState)(),2),X=N[0],z=N[1],q=p(Object(r.useState)(),2),G=q[0],U=q[1],V=p(Object(r.useState)(""),2),J=(V[0],V[1]),K=p(Object(r.useState)(),2),Q=K[0],Z=K[1],$=p(Object(r.useState)(!1),2),tt=$[0],et=$[1],nt=p(Object(r.useState)(),2),rt=nt[0],ot=nt[1],it=p(Object(r.useState)(!1),2),ct=it[0],ut=it[1],at=p(Object(r.useState)(),2),st=at[0],lt=at[1],ft=p(Object(r.useState)(),2),dt=ft[0],pt=ft[1],mt=p(Object(r.useState)(),2),yt=mt[0],ht=mt[1],bt=p(Object(r.useState)(),2),gt=bt[0],vt=bt[1],Ot=p(Object(r.useState)(),2),Et=Ot[0],jt=Ot[1],St=p(Object(r.useState)(),2),xt=St[0],wt=St[1],Tt=p(Object(r.useState)(),2),Ct=Tt[0],Mt=Tt[1],Pt=p(Object(r.useState)(),2),Dt=Pt[0],Lt=Pt[1],It=Object(r.useMemo)((function(){return f(Z)}),[Z]);Object(r.useEffect)((function(){return st&&document.addEventListener("mousemove",It),function(){st&&document.removeEventListener("mousemove",It)}}),[st,It]),Object(r.useEffect)((function(){var t=function(t,e){var n=e.order;return j[st].order<j[w].order?e.order>j[st].order&&e.order<=j[w].order?n=e.order-1:e.order===j[st].order&&(n=j[w].order):j[st].order>j[w].order&&(e.order<j[st].order&&e.order>=j[w].order?n=e.order+1:e.order===j[st].order&&(n=j[w].order)),t.concat(n)};S((function(e){if(void 0!==st&&void 0!==w&&w!==st&&!_){I(e[w].order);var n=e.reduce(t,[]),r=e.map((function(t,e){return t.order=n[e],t}));return k(!0),setTimeout((function(){k(!1)}),500),r}return e}))}),[w,st,j,_]);var Rt=function(){et(!1),Z(void 0),F(!1),H(void 0),U(void 0),ut(!1),ht(void 0),lt(void 0),T(void 0),J("cleanup")};Object(r.useEffect)((function(){W||gt||(document.body.style.overflow=Ct,document.body.style.overscrollBehaviorY=Dt)}),[W,gt]);var _t=function(t,e){t.preventDefault(),t.stopPropagation();var n=t.touches[0].clientX,r=t.touches[0].clientY;F(!0),z(t.touches.length),U({x:n,y:r}),H({x:n,y:r}),lt(e)},kt=function(t,e){t.preventDefault(),t.stopPropagation();var n=t.touches[0].clientX,r=t.touches[0].clientY;ut((function(t){if(!t&&clearTimeout(u),!t&&clearTimeout(a),t){var e=document.elementFromPoint(n,r).id,o=j.find((function(t){return t.id===e}));T(o&&o.index)}return t})),H({x:t.touches[0].clientX,y:t.touches[0].clientY})},Bt=function(t){J("touch end"),clearTimeout(a),clearTimeout(u),Rt(),F(!1)};Object(r.useEffect)((function(){Mt(document.body.style.overflow),Lt(document.body.style.overscrollBehaviorY)}),[]),Object(r.useEffect)((function(){return document.addEventListener("mouseup",Wt),function(){document.removeEventListener("mouseup",Wt)}}),[]),Object(r.useEffect)((function(){void 0===M||void 0===L||L===M||ct||(t.onRearrange&&t.onRearrange(j[st],L,j),P(void 0),I(void 0))}),[L,st,j,M,t,ct]);var Wt=function(t){Rt()},Ft=function(t,e){var n;F((function(t){return n=t,t})),n&&t.preventDefault(),Z({x:t.clientX,y:t.clientY}),et(!0),ot({x:t.clientX,y:t.clientY}),pt(!1),lt(e)},At=function(t,e){return T(e)},Yt=function(){Rt()},Ht=function(t){dt&&t.stopPropagation()};Object(r.useEffect)((function(){tt&&!ct&&(Math.abs(Q.x-rt.x)>=3||Math.abs(Q.y-rt.y)>=3)&&(ut(!0),pt(!0),P(j[st].order)),W&&!ct&&(a=setTimeout((function(){document.body.style.overflow="hidden",document.body.style.overscrollBehaviorY="contain"}),300),u=1===X&&setTimeout((function(){ut(!0)}),500))}),[W,X,tt,ct,rt,Q]),Object(r.useEffect)((function(){if(ct&&!gt&&!yt)try{var t=document.getElementById("".concat(j[st].id,"-wrapper")).getBoundingClientRect();ht({x:(W?G.x:rt.x)-t.left,y:(W?G.y:rt.y)-t.top})}catch(t){console.error(t)}}),[ct,st,G,rt,W,j,gt]),Object(r.useEffect)((function(){if(ct&&yt&&(Y||Q)){if(!gt){var t=j[st].id,e="".concat(t,"-ghost"),n=document.getElementById(t),r=n.classList;n.classList.add("ghost",W&&"touch");var c="ghost ".concat(W&&"touch"),u="".concat(r," ").concat(c),a=o.a.cloneElement(j[st].element,{draggableItem:{id:e,className:u}});vt(a)}!xt&&wt(j[st].id),jt({x:(W?Y.x:Q.x)-yt.x,y:(W?Y.y:Q.y)-yt.y})}else if(!ct&&gt){try{var l=document.getElementById("".concat(xt,"-wrapper")).getBoundingClientRect(),f=l.left,d=l.top;jt({x:f,y:d})}catch(t){console.error(t)}s=setTimeout((function(){Nt()}),i+100)}}),[Q,Y,W,ct,yt,st,gt,j]);var Nt=function(){clearTimeout(s),vt(void 0),jt(void 0)};Object(r.useEffect)((function(){!gt&&xt&&(document.getElementById(xt).classList.remove("ghost","touch"),wt(void 0))}),[gt]);var Xt=p(Object(r.useState)(!1),2),zt=Xt[0],qt=Xt[1],Gt=p(Object(r.useState)(0),2),Ut=Gt[0],Vt=Gt[1],Jt=p(Object(r.useState)(!1),2),Kt=Jt[0],Qt=Jt[1],Zt=p(Object(r.useState)({elements:[],width:0,height:0,endline:{start:{x:void 0,y:void 0},end:{x:void 0,y:void 0},byColumns:[],enterEvent:{elementsNum:0,eventHandler:t.onEndlineEnter&&t.onEndlineEnter}}}),2),$t=Zt[0],te=Zt[1],ee=p(Object(r.useState)(0),2),ne=ee[0],re=ee[1],oe=p(Object(r.useState)(0),2),ie=oe[0],ce=oe[1],ue=Object(r.useRef)(),ae=Object(r.useRef)(),se=Object(r.useRef)(),le=p(Object(r.useState)(window.innerWidth),2),fe=le[0],de=le[1],pe=p(Object(r.useState)(!1),2),me=pe[0],ye=pe[1],he=function(t){return ye(!0)};Object(r.useEffect)((function(){return window.addEventListener("resize",he),window.addEventListener("scroll",be),function(){window.removeEventListener("resize",he),window.removeEventListener("scroll",be)}}),[]),Object(r.useEffect)((function(){window.innerWidth!==fe&&(t.onWidthResize(),de(window.innerWidth));var e=ue.current.offsetWidth,n=j.find((function(t){return!t.separator})),r=j[0].width||document.getElementById("".concat(n.id,"-wrapper")).offsetWidth;Vt(Math.floor(e/r)),Qt(me),ye(!1)}),[me,j]);var be=function(t){ge()},ge=function(){te((function(t){return ae.current&&ae.current.getBoundingClientRect().top-window.innerHeight<=0&&t.endline.enterEvent.elementsNum!==t.elements.length&&(t.endline.enterEvent.elementsNum=t.elements.length,t.endline.enterEvent.eventHandler&&t.endline.enterEvent.eventHandler()),t}))};Object(r.useEffect)((function(){ue.current.offsetHeight>0&&(qt(!0),ge()),zt&&Qt(!0)})),Object(r.useEffect)((function(){Qt((function(){return!(j.length>$t.elements.length)&&(j.length===$t.elements.length||(j.length<$t.elements.length||void 0))}))}),[j,$t.elements.length]),Object(r.useEffect)((function(){var t,e=[],n=$t.endline;n.byColumns=Array(Ut).fill(0),j.concat().sort((function(t,e){return t.order-e.order})).forEach((function(r,o){var i=document.getElementById("".concat(r.id,"-wrapper")),c=r.height||i.offsetHeight;t=r.width||i.offsetWidth;var u,a,s=document.getElementById(r.id),l=r.width||s.offsetWidth,f=r.height||s.offsetHeight,p=s.offsetLeft,m=s.offsetTop,y=Math.min.apply(Math,d(n.byColumns)),h=n.byColumns.indexOf(y),b=Math.max.apply(Math,d(n.byColumns)),g=n.byColumns.indexOf(b);if(r.separator){u=0,a=n.byColumns[g];var v=n.byColumns[g]+c;n.byColumns.fill(v)}else u=h*t,a=n.byColumns[h],n.byColumns[h]+=c;e[r.index]={x:u,y:a,cardWidth:l,cardHeight:f,cardOffsetLeft:p,cardOffsetTop:m}})),n.start.x=t*n.byColumns.indexOf(Math.min.apply(Math,d(n.byColumns))),n.start.y=Math.min.apply(Math,d(n.byColumns)),n.end.x=t*n.byColumns.indexOf(Math.max.apply(Math,d(n.byColumns))),n.end.y=Math.max.apply(Math,d(n.byColumns)),te({elements:e,width:t*Ut,height:n.end.y,endline:n})}),[Ut,ie,ne,j,$t.endline]);var ve=function(t){re(ne+1),console.log("can't load: ",t)},Oe=function(t){return ce(ie+1)},Ee=function(t){},je=j.map((function(t,r){return o.a.createElement("div",{className:"element-bounding",id:"".concat(t.id,"-wrapper"),key:"".concat(t.id,"-wrapper"),style:{position:"absolute",margin:0,padding:0,userSelect:"none",top:"".concat($t.elements[r]?$t.elements[r].y:0,"px"),left:"".concat($t.elements[r]?$t.elements[r].x:0,"px"),transition:"".concat(xt!==t.id&&Kt&&zt?"top ".concat(n,"ms ").concat(e,", left ").concat(n,"ms ").concat(e):"none"),visibility:$t.elements[r]&&zt?"visible":"hidden",opacity:gt&&xt===j[r].id?0:1},onLoad:Oe,onError:ve,onClickCapture:Ht},j[r].element)}));return o.a.createElement("div",{className:"masonry",ref:ue},t.header&&zt&&o.a.createElement("div",{style:{position:"relative",width:"".concat($t.width,"px"),margin:"0 auto 0 auto"}},t.header),o.a.createElement("div",{style:{position:"relative",width:"".concat($t.width,"px"),height:"".concat($t.height,"px"),margin:"0 auto 0 auto",transition:Kt&&zt?"width ".concat(n,"ms ").concat(e):"none"},className:"boundry-box"},je,gt&&o.a.createElement(l,{x:Et.x,y:Et.y,drag:ct,onGhostEndTransition:Nt,ghostTransitionDuration:i,ghostTransitionTimingFunction:c},gt),void 0!==$t.endline.start.y&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{id:"MasonryLayoutEndlineStart",ref:ae,style:{position:"absolute",top:"".concat($t.endline.start.y,"px"),left:"".concat($t.endline.start.x,"px")}}),o.a.createElement("div",{id:"MasonryLayoutEndlineEnd",ref:se,style:{position:"absolute",top:"".concat($t.endline.end.y,"px"),left:"".concat($t.endline.end.x,"px")}}))))}v.propTypes={reverse:c.a.bool,onEndlineEnter:c.a.func,onRearrange:c.a.func,onWidthResize:c.a.func,transitionDuration:c.a.number,transitionTimingFunction:c.a.string,ghostTransitionDuration:c.a.number,ghostTransitionTimingFunction:c.a.string},v.defaultProps={transitionDuration:600,transitionTimingFunction:"ease",ghostTransitionDuration:200,ghostTransitionTimingFunction:"ease"};e.default=v}]);