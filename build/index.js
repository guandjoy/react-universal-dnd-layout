module.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e){t.exports=require("react")},function(t,e,n){t.exports=n(2)()},function(t,e,n){"use strict";var r=n(3);function o(){}function i(){}i.resetWarningCache=o,t.exports=function(){function t(t,e,n,o,i,c){if(c!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=n(1),c=n.n(i);var u,a,s,l=function(t){var e=t.ghostTransitionDuration,n=t.ghostTransitionTimingFunction;return o.a.createElement("div",{style:{position:"fixed",visibility:"visible",left:t.x,top:t.y,pointerEvents:"none",transition:t.drag?"none":"left ".concat(e,"ms ").concat(n,", top ").concat(e,"ms ").concat(n)},onTransitionEnd:function(){return t.onGhostEndTransition()}},t.children)};function f(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,u=t[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(t){return function(){return o.a.Children.map(t,(function(t,e){return t.props.separator?{index:e,id:t.key,order:t.props.order,separator:t.props.separator,element:t}:{index:e,id:t.key,order:t.props.order,separator:t.props.separator,width:t.props.width,height:t.props.height,element:o.a.cloneElement(t,m({},t.props,{draggableItem:{onMouseDown:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return onMouseDown(t,e)})),onMouseEnter:function(t){return onMouseEnterItem(t,e)},onDragEnd:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return onDragEnd(t,e)})),onTouchStart:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return onTouchStart(t,e)})),onTouchMove:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return onTouchMove(t,e)})),onTouchEnd:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return onTouchEnd()})),onClick:function(t){return onClickEvent()}}}))}}))}},b=function(t,e){if(console.log("item reducer",e,t),"update"===e.type)return h(e.payload)()};function g(t){var e=t.transitionTimingFunction,n=t.transitionDuration,i=t.ghostTransitionDuration,c=t.ghostTransitionTimingFunction,p=d(Object(r.useReducer)(b,[],h(t.children)),2),y=p[0],g=p[1];Object(r.useEffect)((function(){g({type:"update",payload:t.children}),console.log("itemss",y)}),[t.children]);var v=function(){return o.a.Children.map(t.children,(function(t,e){return t.props.separator?{index:e,id:t.key,order:t.props.order,separator:t.props.separator,element:t}:{index:e,id:t.key,order:t.props.order,separator:t.props.separator,width:t.props.width,height:t.props.height,element:o.a.cloneElement(t,m({},t.props,{draggableItem:{onMouseDown:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return Bt(t,e)})),onMouseEnter:function(t){return Wt(t,e)},onDragEnd:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return At(t,e)})),onTouchStart:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return It(t,e)})),onTouchMove:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return Rt(t,e)})),onTouchEnd:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return _t()})),onClick:function(t){return Oe()}}}))}}))},O=d(Object(r.useState)((function(){return v()})),2),E=O[0],j=O[1];Object(r.useEffect)((function(){j((function(){return v()}))}),[t.children]);var S=d(Object(r.useState)(void 0),2),x=S[0],w=S[1],T=d(Object(r.useState)(void 0),2),C=T[0],M=T[1],P=d(Object(r.useState)(void 0),2),D=P[0],L=P[1],I=d(Object(r.useState)(!1),2),R=I[0],_=I[1],k=d(Object(r.useState)(!1),2),B=k[0],W=k[1],F=d(Object(r.useState)(),2),A=F[0],Y=F[1],H=d(Object(r.useState)(),2),N=H[0],X=H[1],z=d(Object(r.useState)(),2),q=z[0],G=z[1],U=d(Object(r.useState)(""),2),V=(U[0],U[1]),J=d(Object(r.useState)(),2),K=J[0],Q=J[1],Z=d(Object(r.useState)(!1),2),$=Z[0],tt=Z[1],et=d(Object(r.useState)(),2),nt=et[0],rt=et[1],ot=d(Object(r.useState)(!1),2),it=ot[0],ct=ot[1],ut=d(Object(r.useState)(),2),at=ut[0],st=ut[1],lt=d(Object(r.useState)(),2),ft=lt[0],dt=lt[1],pt=d(Object(r.useState)(),2),mt=pt[0],yt=pt[1],ht=d(Object(r.useState)(),2),bt=ht[0],gt=ht[1],vt=d(Object(r.useState)(),2),Ot=vt[0],Et=vt[1],jt=d(Object(r.useState)(),2),St=jt[0],xt=jt[1],wt=d(Object(r.useState)(),2),Tt=wt[0],Ct=wt[1],Mt=d(Object(r.useState)(),2),Pt=Mt[0],Dt=Mt[1];Object(r.useEffect)((function(){var t=function(t,e){var n=e.order;return E[at].order<E[x].order?e.order>E[at].order&&e.order<=E[x].order?n=e.order-1:e.order===E[at].order&&(n=E[x].order):E[at].order>E[x].order&&(e.order<E[at].order&&e.order>=E[x].order?n=e.order+1:e.order===E[at].order&&(n=E[x].order)),t.concat(n)};j((function(e){if(void 0!==at&&void 0!==x&&x!==at&&!R){L(e[x].order);var n=e.reduce(t,[]),r=e.map((function(t,e){return t.order=n[e],t}));return _(!0),setTimeout((function(){_(!1)}),500),r}return e}))}),[x,at,E,R]);var Lt=function(){tt(!1),Q(void 0),W(!1),Y(void 0),G(void 0),ct(!1),yt(void 0),st(void 0),w(void 0),V("cleanup")};Object(r.useEffect)((function(){B||bt||(document.body.style.overflow=Tt,document.body.style.overscrollBehaviorY=Pt)}),[B,bt]);var It=function(t,e){t.preventDefault(),t.stopPropagation();var n=t.touches[0].clientX,r=t.touches[0].clientY;W(!0),X(t.touches.length),G({x:n,y:r}),Y({x:n,y:r}),st(e)},Rt=function(t,e){t.preventDefault(),t.stopPropagation();var n=t.touches[0].clientX,r=t.touches[0].clientY;ct((function(t){if(!t&&clearTimeout(u),!t&&clearTimeout(a),t){var e=document.elementFromPoint(n,r).id,o=E.find((function(t){return t.id===e}));w(o&&o.index)}return t})),Y({x:t.touches[0].clientX,y:t.touches[0].clientY})},_t=function(t){V("touch end"),clearTimeout(a),clearTimeout(u),Lt(),W(!1)};Object(r.useEffect)((function(){Ct(document.body.style.overflow),Dt(document.body.style.overscrollBehaviorY)}),[]),Object(r.useEffect)((function(){return document.addEventListener("mousemove",Ft),document.addEventListener("mouseup",kt),function(){document.removeEventListener("mousemove",Ft),document.removeEventListener("mouseup",kt)}}),[]),Object(r.useEffect)((function(){void 0===C||void 0===D||D===C||it||(t.onRearrange&&t.onRearrange(E[at],D,E),M(void 0),L(void 0))}),[D,at,E,C,t,it]);var kt=function(t){Lt()},Bt=function(t,e){var n;W((function(t){return n=t,t})),n&&t.preventDefault(),Q({x:t.clientX,y:t.clientY}),tt(!0),rt({x:t.clientX,y:t.clientY}),dt(!1),st(e)},Wt=function(t,e){return w(e)},Ft=function(t){t.preventDefault(),t.stopPropagation(),st((function(e){return Q((function(n){return void 0!==e?{x:t.clientX,y:t.clientY}:n})),e}))},At=function(){Lt()},Yt=function(t){ft&&t.stopPropagation()};Object(r.useEffect)((function(){$&&!it&&(Math.abs(K.x-nt.x)>=3||Math.abs(K.y-nt.y)>=3)&&(ct(!0),dt(!0),M(E[at].order)),B&&!it&&(a=setTimeout((function(){document.body.style.overflow="hidden",document.body.style.overscrollBehaviorY="contain"}),300),u=1===N&&setTimeout((function(){ct(!0)}),500))}),[B,N,$,it,nt,K]),Object(r.useEffect)((function(){if(it&&!bt&&!mt)try{var t=document.getElementById("".concat(E[at].id,"-wrapper")).getBoundingClientRect();yt({x:(B?q.x:nt.x)-t.left,y:(B?q.y:nt.y)-t.top})}catch(t){console.error(t)}}),[it,at,q,nt,B,E,bt]),Object(r.useEffect)((function(){if(it&&mt&&(A||K)){if(!bt){var t=E[at].id,e="".concat(t,"-ghost"),n=document.getElementById(t),r=n.classList;n.classList.add("ghost",B&&"touch");var c="ghost ".concat(B&&"touch"),u="".concat(r," ").concat(c),a=o.a.cloneElement(E[at].element,{draggableItem:{id:e,className:u}});gt(a)}!St&&xt(E[at].id),Et({x:(B?A.x:K.x)-mt.x,y:(B?A.y:K.y)-mt.y})}else if(!it&&bt){try{var l=document.getElementById("".concat(St,"-wrapper")).getBoundingClientRect(),f=l.left,d=l.top;Et({x:f,y:d})}catch(t){console.error(t)}s=setTimeout((function(){Ht()}),i+100)}}),[K,A,B,it,mt,at,bt,E]);var Ht=function(){clearTimeout(s),gt(void 0),Et(void 0)};Object(r.useEffect)((function(){!bt&&St&&(document.getElementById(St).classList.remove("ghost","touch"),xt(void 0))}),[bt]);var Nt=d(Object(r.useState)(!1),2),Xt=Nt[0],zt=Nt[1],qt=d(Object(r.useState)(0),2),Gt=qt[0],Ut=qt[1],Vt=d(Object(r.useState)(!1),2),Jt=Vt[0],Kt=Vt[1],Qt=d(Object(r.useState)({elements:[],width:0,height:0,endline:{start:{x:void 0,y:void 0},end:{x:void 0,y:void 0},byColumns:[],enterEvent:{elementsNum:0,eventHandler:t.onEndlineEnter&&t.onEndlineEnter}}}),2),Zt=Qt[0],$t=Qt[1],te=d(Object(r.useState)(0),2),ee=te[0],ne=te[1],re=d(Object(r.useState)(0),2),oe=re[0],ie=re[1],ce=Object(r.useRef)(),ue=Object(r.useRef)(),ae=Object(r.useRef)(),se=d(Object(r.useState)(window.innerWidth),2),le=se[0],fe=se[1],de=d(Object(r.useState)(!1),2),pe=de[0],me=de[1],ye=function(t){return me(!0)};Object(r.useEffect)((function(){return window.addEventListener("resize",ye),window.addEventListener("scroll",he),function(){window.removeEventListener("resize",ye),window.removeEventListener("scroll",he)}}),[]),Object(r.useEffect)((function(){window.innerWidth!==le&&(t.onWidthResize(),fe(window.innerWidth));var e=ce.current.offsetWidth,n=E.find((function(t){return!t.separator})),r=E[0].width||document.getElementById("".concat(n.id,"-wrapper")).offsetWidth;Ut(Math.floor(e/r)),Kt(pe),me(!1)}),[pe,E]);var he=function(t){be()},be=function(){$t((function(t){return ue.current&&ue.current.getBoundingClientRect().top-window.innerHeight<=0&&t.endline.enterEvent.elementsNum!==t.elements.length&&(t.endline.enterEvent.elementsNum=t.elements.length,t.endline.enterEvent.eventHandler&&t.endline.enterEvent.eventHandler()),t}))};Object(r.useEffect)((function(){ce.current.offsetHeight>0&&(zt(!0),be()),Xt&&Kt(!0)})),Object(r.useEffect)((function(){Kt((function(){return!(E.length>Zt.elements.length)&&(E.length===Zt.elements.length||(E.length<Zt.elements.length||void 0))}))}),[E,Zt.elements.length]),Object(r.useEffect)((function(){var t,e=[],n=Zt.endline;n.byColumns=Array(Gt).fill(0),E.concat().sort((function(t,e){return t.order-e.order})).forEach((function(r,o){var i=document.getElementById("".concat(r.id,"-wrapper")),c=r.height||i.offsetHeight;t=r.width||i.offsetWidth;var u,a,s=document.getElementById(r.id),l=r.width||s.offsetWidth,d=r.height||s.offsetHeight,p=s.offsetLeft,m=s.offsetTop,y=Math.min.apply(Math,f(n.byColumns)),h=n.byColumns.indexOf(y),b=Math.max.apply(Math,f(n.byColumns)),g=n.byColumns.indexOf(b);if(r.separator){u=0,a=n.byColumns[g];var v=n.byColumns[g]+c;n.byColumns.fill(v)}else u=h*t,a=n.byColumns[h],n.byColumns[h]+=c;e[r.index]={x:u,y:a,cardWidth:l,cardHeight:d,cardOffsetLeft:p,cardOffsetTop:m}})),n.start.x=t*n.byColumns.indexOf(Math.min.apply(Math,f(n.byColumns))),n.start.y=Math.min.apply(Math,f(n.byColumns)),n.end.x=t*n.byColumns.indexOf(Math.max.apply(Math,f(n.byColumns))),n.end.y=Math.max.apply(Math,f(n.byColumns)),$t({elements:e,width:t*Gt,height:n.end.y,endline:n})}),[Gt,oe,ee,E,Zt.endline]);var ge=function(t){ne(ee+1),console.log("can't load: ",t)},ve=function(t){return ie(oe+1)},Oe=function(t){},Ee=E.map((function(t,r){return o.a.createElement("div",{className:"element-bounding",id:"".concat(t.id,"-wrapper"),key:"".concat(t.id,"-wrapper"),style:{position:"absolute",margin:0,padding:0,userSelect:"none",top:"".concat(Zt.elements[r]?Zt.elements[r].y:0,"px"),left:"".concat(Zt.elements[r]?Zt.elements[r].x:0,"px"),transition:"".concat(St!==t.id&&Jt&&Xt?"top ".concat(n,"ms ").concat(e,", left ").concat(n,"ms ").concat(e):"none"),visibility:Zt.elements[r]&&Xt?"visible":"hidden",opacity:bt&&St===E[r].id?0:1},onLoad:ve,onError:ge,onClickCapture:Yt},E[r].element)}));return o.a.createElement("div",{className:"masonry",ref:ce},t.header&&Xt&&o.a.createElement("div",{style:{position:"relative",width:"".concat(Zt.width,"px"),margin:"0 auto 0 auto"}},t.header),o.a.createElement("div",{style:{position:"relative",width:"".concat(Zt.width,"px"),height:"".concat(Zt.height,"px"),margin:"0 auto 0 auto",transition:Jt&&Xt?"width ".concat(n,"ms ").concat(e):"none"},className:"boundry-box"},Ee,bt&&o.a.createElement(l,{x:Ot.x,y:Ot.y,drag:it,onGhostEndTransition:Ht,ghostTransitionDuration:i,ghostTransitionTimingFunction:c},bt),void 0!==Zt.endline.start.y&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{id:"MasonryLayoutEndlineStart",ref:ue,style:{position:"absolute",top:"".concat(Zt.endline.start.y,"px"),left:"".concat(Zt.endline.start.x,"px")}}),o.a.createElement("div",{id:"MasonryLayoutEndlineEnd",ref:ae,style:{position:"absolute",top:"".concat(Zt.endline.end.y,"px"),left:"".concat(Zt.endline.end.x,"px")}}))))}g.propTypes={reverse:c.a.bool,onEndlineEnter:c.a.func,onRearrange:c.a.func,onWidthResize:c.a.func,transitionDuration:c.a.number,transitionTimingFunction:c.a.string,ghostTransitionDuration:c.a.number,ghostTransitionTimingFunction:c.a.string},g.defaultProps={transitionDuration:600,transitionTimingFunction:"ease",ghostTransitionDuration:200,ghostTransitionTimingFunction:"ease"};e.default=g}]);