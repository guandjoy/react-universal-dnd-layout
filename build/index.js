module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t){e.exports=require("react")},function(e,t,n){e.exports=n(2)()},function(e,t,n){"use strict";var r=n(3);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,c){if(c!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),c=n.n(i);var u=function(e){var t=e.ghostTransitionDuration,n=e.ghostTransitionTimingFunction;return o.a.createElement("div",{style:{position:"fixed",visibility:"visible",left:e.x,top:e.y,pointerEvents:"none",transition:e.drag?"none":"left ".concat(t,"ms ").concat(n,", top ").concat(t,"ms ").concat(n)},onTransitionEnd:function(){return e.onGhostEndTransition()}},e.children)};function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f,d,p,m=function(e){return function(t){t.preventDefault(),t.stopPropagation(),e((function(e){return s({},e,{pos:{x:t.clientX,y:t.clientY}})}))}},y=function(e){return function(t){return function(n){n.preventDefault();var r={x:n.clientX,y:n.clientY};e({isDown:!0,initialPos:r,pos:r,preventClick:!1,itemIndex:t})}}},b=function(e){return function(t){return function(n){return e(t)}}},h=function(e){return function(t){return e()}},g=function(e){return function(t){return function(n){n.preventDefault(),n.stopPropagation();var r={x:n.touches[0].clientX,y:n.touches[0].clientY};e({isActive:!0,numOfFingers:n.touches.length,initialPos:r,pos:r,itemIndex:t})}}},v=function(e){return function(t){t.preventDefault(),t.stopPropagation();var n={x:t.touches[0].clientX,y:t.touches[0].clientY};e((function(e){return s({},e,{pos:n})}))}},O=function(e){return function(t){return e()}};function j(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){var t=e.transitionTimingFunction,n=e.transitionDuration,i=e.ghostTransitionDuration,c=e.ghostTransitionTimingFunction,a=function(){return o.a.Children.map(e.children,(function(e,t){return e.props.separator?{index:t,id:e.key,order:e.props.order,separator:e.props.separator,element:e}:{index:t,id:e.key,order:e.props.order,separator:e.props.separator,width:e.props.width,height:e.props.height,element:o.a.cloneElement(e,x({},e.props,{draggableItem:{onMouseDown:y(Y)(t),onMouseEnter:b(P)(t),onDragEnd:h(he),onTouchStart:g(A)(t),onTouchMove:v(A),onTouchEnd:O(he)}}))}}))},s=E(Object(r.useState)((function(){return a()})),2),l=s[0],w=s[1];Object(r.useEffect)((function(){w((function(){return a()}))}),[e.children]);var T=E(Object(r.useState)(),2),S=T[0],P=T[1],C=E(Object(r.useState)(),2),D=C[0],M=C[1],I=E(Object(r.useState)(),2),L=I[0],R=I[1],_=E(Object(r.useState)(!1),2),B=_[0],F=_[1],W=E(Object(r.useState)(!1),2),k=W[0],A=W[1],H=E(Object(r.useState)(),2),N=H[0],Y=H[1],z=E(Object(r.useState)(!1),2),X=z[0],q=z[1],G=E(Object(r.useState)(),2),U=G[0],V=G[1],J=E(Object(r.useState)(),2),K=J[0],Q=J[1],Z=E(Object(r.useState)(),2),$=Z[0],ee=Z[1],te=E(Object(r.useState)(),2),ne=te[0],re=te[1],oe=E(Object(r.useState)(),2),ie=oe[0],ce=oe[1],ue=E(Object(r.useState)(),2),ae=ue[0],se=ue[1],le=E(Object(r.useState)(),2),fe=le[0],de=le[1],pe=E(Object(r.useState)(),2),me=pe[0],ye=pe[1],be=Object(r.useMemo)((function(){return m(Y)}),[Y]);Object(r.useEffect)((function(){return N&&N.isDown&&document.addEventListener("mousemove",be),function(){N&&N.isDown&&document.removeEventListener("mousemove",be)}}),[N,be]),Object(r.useEffect)((function(){var e=function(e,t){var n=t.order;return l[U].order<l[S].order?t.order>l[U].order&&t.order<=l[S].order?n=t.order-1:t.order===l[U].order&&(n=l[S].order):l[U].order>l[S].order&&(t.order<l[U].order&&t.order>=l[S].order?n=t.order+1:t.order===l[U].order&&(n=l[S].order)),e.concat(n)};w((function(t){if("number"==typeof U&&"number"==typeof S&&S!==U&&!B){R(t[S].order);var n=t.reduce(e,[]),r=t.map((function(e,t){return e.order=n[t],e}));return F(!0),setTimeout((function(){F(!1)}),500),r}return t}))}),[S,U,l,B]);var he=function(){Y(null),A((function(e){return e&&clearTimeout(d),e&&clearTimeout(f),!1})),q(!1),ee(null),V(null),P(null)};Object(r.useEffect)((function(){k||ne||(document.body.style.overflow=fe,document.body.style.overscrollBehaviorY=me)}),[k,ne,fe,me]);var ge=Object(r.useMemo)((function(){return k&&k.pos&&X&&document.elementFromPoint(k.pos.x,k.pos.y).id}),[k,X]);Object(r.useEffect)((function(){if(X&&ge){var e=l.find((function(e){return e.id===ge}));P(e&&e.index)}else k&&k.pos&&clearTimeout(f),k&&k.pos&&clearTimeout(d)}),[X,l,ge,k]),Object(r.useEffect)((function(){de(document.body.style.overflow),ye(document.body.style.overscrollBehaviorY)}),[]),Object(r.useEffect)((function(){return document.addEventListener("mouseup",ve),function(){document.removeEventListener("mouseup",ve)}}),[]),Object(r.useEffect)((function(){"number"!=typeof D||"number"!=typeof L||L===D||X||(e.onRearrange&&e.onRearrange(l[U],L,l),M(null),R(null))}),[L,U,l,D,e,X]);var ve=function(e){he()},Oe=function(e){K&&e.stopPropagation()};Object(r.useEffect)((function(){N&&N.isDown&&N.pos&&!X&&(Math.abs(N.pos.x-N.initialPos.x)>=3||Math.abs(N.pos.y-N.initialPos.y)>=3)&&(q(!0),Q(!0),M(l[N.itemIndex].order),V(N.itemIndex)),k&&!X&&(d=setTimeout((function(){document.body.style.overflow="hidden",document.body.style.overscrollBehaviorY="contain"}),300),f=1===k.numOfFingers&&setTimeout((function(){V(k.itemIndex),q(!0)}),500))}),[k,N,X,l]),Object(r.useEffect)((function(){if(X&&(k||N)&&!ne&&!$)try{var e=document.getElementById("".concat(l[U].id,"-wrapper")).getBoundingClientRect();ee({x:(k?k.initialPos.x:N.initialPos.x)-e.left,y:(k?k.initialPos.y:N.initialPos.y)-e.top})}catch(e){console.error(e)}}),[X,U,k,l,ne,N,$]),Object(r.useEffect)((function(){if(X&&$&&(k||N)){if(!ne){var e=l[U].id,t="".concat(e,"-ghost"),n=document.getElementById(e),r=n.classList;n.classList.add("ghost",k&&"touch");var c="ghost ".concat(k&&"touch"),u="".concat(r," ").concat(c),a=o.a.cloneElement(l[U].element,{draggableItem:{id:t,className:u}});re(a)}!ae&&se(l[U].id),ce({x:(k?k.pos.x:N.pos.x)-$.x,y:(k?k.pos.y:N.pos.y)-$.y})}else if(!X&&ne){try{var s=document.getElementById("".concat(ae,"-wrapper")).getBoundingClientRect(),f=s.left,d=s.top;ce({x:f,y:d})}catch(e){console.error(e)}p=setTimeout((function(){je()}),i+100)}}),[N,k,X,$,U,ne,l,ae,i]);var je=function(){clearTimeout(p),re(null),ce(null),Q(!1)};Object(r.useEffect)((function(){!ne&&ae&&(document.getElementById(ae).classList.remove("ghost","touch"),se(null))}),[ne,ae]);var Ee=E(Object(r.useState)(!1),2),we=Ee[0],xe=Ee[1],Te=E(Object(r.useState)(0),2),Se=Te[0],Pe=Te[1],Ce=E(Object(r.useState)(!1),2),De=Ce[0],Me=Ce[1],Ie=E(Object(r.useState)({elements:[],width:0,height:0,endline:{start:{x:null,y:null},end:{x:null,y:null},byColumns:[],enterEvent:{elementsNum:0,eventHandler:e.onEndlineEnter&&e.onEndlineEnter}}}),2),Le=Ie[0],Re=Ie[1],_e=E(Object(r.useState)(0),2),Be=_e[0],Fe=_e[1],We=E(Object(r.useState)(0),2),ke=We[0],Ae=We[1],He=Object(r.useRef)(),Ne=Object(r.useRef)(),Ye=Object(r.useRef)(),ze=E(Object(r.useState)(window.innerWidth),2),Xe=ze[0],qe=ze[1],Ge=E(Object(r.useState)(!1),2),Ue=Ge[0],Ve=Ge[1],Je=function(e){return Ve(!0)};Object(r.useEffect)((function(){return window.addEventListener("resize",Je),window.addEventListener("scroll",Ke),function(){window.removeEventListener("resize",Je),window.removeEventListener("scroll",Ke)}}),[]),Object(r.useEffect)((function(){window.innerWidth!==Xe&&(e.onWidthResize(),qe(window.innerWidth));var t=He.current.offsetWidth,n=l.find((function(e){return!e.separator})),r=l[0].width||document.getElementById("".concat(n.id,"-wrapper")).offsetWidth;Pe(Math.floor(t/r)),Me(Ue),Ve(!1)}),[Ue,l]);var Ke=function(e){Qe()},Qe=function(){Re((function(e){return Ne.current&&Ne.current.getBoundingClientRect().top-window.innerHeight<=0&&e.endline.enterEvent.elementsNum!==e.elements.length&&(e.endline.enterEvent.elementsNum=e.elements.length,e.endline.enterEvent.eventHandler&&e.endline.enterEvent.eventHandler()),e}))};Object(r.useEffect)((function(){He.current.offsetHeight>0&&(xe(!0),Qe()),we&&Me(!0)})),Object(r.useEffect)((function(){Me((function(){return!(l.length>Le.elements.length)&&(l.length===Le.elements.length||(l.length<Le.elements.length||void 0))}))}),[l,Le.elements.length]),Object(r.useEffect)((function(){var e,t=[],n=Le.endline;n.byColumns=Array(Se).fill(0),l.concat().sort((function(e,t){return e.order-t.order})).forEach((function(r,o){var i=document.getElementById("".concat(r.id,"-wrapper")),c=r.height||i.offsetHeight;e=r.width||i.offsetWidth;var u,a,s=document.getElementById(r.id),l=r.width||s.offsetWidth,f=r.height||s.offsetHeight,d=s.offsetLeft,p=s.offsetTop,m=Math.min.apply(Math,j(n.byColumns)),y=n.byColumns.indexOf(m),b=Math.max.apply(Math,j(n.byColumns)),h=n.byColumns.indexOf(b);if(r.separator){u=0,a=n.byColumns[h];var g=n.byColumns[h]+c;n.byColumns.fill(g)}else u=y*e,a=n.byColumns[y],n.byColumns[y]+=c;t[r.index]={x:u,y:a,cardWidth:l,cardHeight:f,cardOffsetLeft:d,cardOffsetTop:p}})),n.start.x=e*n.byColumns.indexOf(Math.min.apply(Math,j(n.byColumns))),n.start.y=Math.min.apply(Math,j(n.byColumns)),n.end.x=e*n.byColumns.indexOf(Math.max.apply(Math,j(n.byColumns))),n.end.y=Math.max.apply(Math,j(n.byColumns)),Re({elements:t,width:e*Se,height:n.end.y,endline:n})}),[Se,ke,Be,l,Le.endline]);var Ze=function(e){Fe(Be+1),console.log("can't load: ",e)},$e=function(e){return Ae(ke+1)},et=l.map((function(e,r){return o.a.createElement("div",{className:"element-bounding",id:"".concat(e.id,"-wrapper"),key:"".concat(e.id,"-wrapper"),style:{position:"absolute",margin:0,padding:0,userSelect:"none",top:"".concat(Le.elements[r]?Le.elements[r].y:0,"px"),left:"".concat(Le.elements[r]?Le.elements[r].x:0,"px"),transition:"".concat(ae!==e.id&&De&&we?"top ".concat(n,"ms ").concat(t,", left ").concat(n,"ms ").concat(t):"none"),visibility:Le.elements[r]&&we?"visible":"hidden",opacity:ne&&ae===l[r].id?0:1},onLoad:$e,onError:Ze,onClickCapture:Oe},l[r].element)}));return o.a.createElement("div",{className:"masonry",ref:He},e.header&&we&&o.a.createElement("div",{style:{position:"relative",width:"".concat(Le.width,"px"),margin:"0 auto 0 auto"}},e.header),o.a.createElement("div",{style:{position:"relative",width:"".concat(Le.width,"px"),height:"".concat(Le.height,"px"),margin:"0 auto 0 auto",transition:De&&we?"width ".concat(n,"ms ").concat(t):"none"},className:"boundry-box"},et,ne&&o.a.createElement(u,{x:ie.x,y:ie.y,drag:X,onGhostEndTransition:je,ghostTransitionDuration:i,ghostTransitionTimingFunction:c},ne),"number"==typeof Le.endline.start.y&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{id:"MasonryLayoutEndlineStart",ref:Ne,style:{position:"absolute",top:"".concat(Le.endline.start.y,"px"),left:"".concat(Le.endline.start.x,"px")}}),o.a.createElement("div",{id:"MasonryLayoutEndlineEnd",ref:Ye,style:{position:"absolute",top:"".concat(Le.endline.end.y,"px"),left:"".concat(Le.endline.end.x,"px")}}))))}S.propTypes={header:c.a.element,children:c.a.element,reverse:c.a.bool,onEndlineEnter:c.a.func,onRearrange:c.a.func,onWidthResize:c.a.func,transitionDuration:c.a.number,transitionTimingFunction:c.a.string,ghostTransitionDuration:c.a.number,ghostTransitionTimingFunction:c.a.string},S.defaultProps={transitionDuration:600,transitionTimingFunction:"ease",ghostTransitionDuration:200,ghostTransitionTimingFunction:"ease"};t.default=S}]);